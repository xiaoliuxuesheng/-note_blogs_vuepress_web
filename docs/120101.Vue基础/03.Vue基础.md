---
title: 第三章 Vue基础
date: 2022-01-01 00:01:03
permalink: /pages/a44bd6/
categories:
  - Vue基础
tags:
  - 
author: 
  name: xiaoliuxuesheng
  link: https://gitee.com/xiaoliuxuesheng
---

## 3.1 Vue构造函数

1. el：作用关联html标签作为Vue实例的容器，关联方式有两种：①通过Vue的el实例属性指定、②通过Vue原型属性$mount指定

   ```js
   // 通过Vue的实例属性el指定,内部也是执行$mount函数进行Vue实例挂载
   new Vue({el: '#app'})
   
   //通过Vue原型属性$mount指定
   new Vue({}).$mount("#app")
   ```

2. data：在Vue2中，data属性用于保存Vue实例中的变量，要求data是一个普通函数（不可以是箭头函数，否则this指向window），

   > 只做了解，在Vue3中使用setup语法糖，不涉及此问题；

   ```js
   // data必须是一个普通函数
   new Vue({
       data: function () {
           return {
               msg: "Hello Vue"
           }
       }
   }).$mount("#app");
   
   // 普通函数的简写
   new Vue({
       data() {
           return {
               msg: "Hello Vue"
           }
       }
   }).$mount("#app");
   ```

3. method：被vue管理的函数，不可以使用箭头函数

4. computed：也是属于Vue实例的一个属性，区别与data，计算属性的数据来源是data，并且可以缓存

   ```js
   // 完整格式
   // 简写格式
   ```

5. watch：

6. emits

## 3.2 Vue语法

> 1. 只有在Vue容器中才可以使用Vue语法
> 2. Vue容器本质就是各种html标签，所以Vue语法的本质作用就是给HTML标签上添加各种数据
>    - 添加数据方式一：在标签体中添加数据使用模版语法（插值表达式）；
>    - 添加数据方式二：在标题属性中使用指令语法（v-开头的vue指令），并且指令语法可以绑定标签属性、标签内容、标签事件等等；

### 3.2.1 Vue模版语法

1. 插值表达式语法格式：{{}}

2. 插值表达式的使用

   ```vue
   1. 读取Vue实例中的变量
   {{变量名称}}
   {{对象.属性名}}
   
   2. 使用数学运算
   {{1+2}}
   
   3. 使用变量值对应的内置函数
   {{name.toUpperCase()}}
   
   4. 使用内置对象
   {{new Date()}}
   
   5. 三元表达式（三元运算符）
   {{ 10>20?'10大于20':'10不大于20' }}
   ```

### 3.2.2 Vue指令语法

1. v-bind←→`:`：数据绑定，引入Vue实例中的变量
   - class样式绑定
   - style样式绑定
2. v-text：纯文本填充，相比差值表达式更简洁， **指定标签中的文本会被属性值替换**
3. v-html：内容按普通的HTML插入，不会作为Vue模板进行编译， **建议**：本网站的内部数据是可以使用的，如果是来自第三方数据不建议使用
4. v-pre：填充绑定的DOM中的原始信息，跳过编译过程（也不会编译差值表达式）
5. v-once：表示只会绑定一次数据，不会有数据响应式功能，**优点**：有助于提高性能
6. v-model：双向数据绑定：主要是针对输入框， 用户输入的数据可以修改模型数据值，模型数据库值的改变页面相应到页面

### 3.2.3 Vue事件

1. v-on←→`@`
   - 使用v-on:事件名称或者@事件名称绑定事件
   - 事件回调函数需要配置在Vue的methods对象中，并且最终页面添加的Vue实例对象上
   - methods中配置的函数，不建议使用箭头函数，否则this不是Vue实例对象
   - methods中配置的函数，都是被Vue管理的函数，this的指向是vm或者组件实例对象
   - @click='demo'和@click=‘demo($event)’效果一致，但是后者可以传参数
2. 事件修饰符：
   - prevent：阻止默认行为
   - stop：阻止事件冒泡
   - once：只触发一次
   - capture：使用事件的捕获模式：事件是分捕获阶段和冒泡阶段，默认处理事件的是冒泡阶段
   - self：只有event.target是当前操作的元素才触发事件
   - passive：事件的默认行为立即执行，无需等待事件回调执行完毕
3. 按键修饰符：
   - 常用按键别名
     1. enter：回车
     2. delete：删除
     3. esc：退出
     4. space：空格
     5. tab：换行，必须配合keydown事件使用
     6. up：上
     7. down：下
     8. left：左
     9. right：右
   - 系统修饰建：用法特殊，Ctrl、Alt、Shift、meta
     - 配合keyup使用：按下修饰键同时，再按下其他键，随后释放其他键才能生效
     - 配合keydown使用：正常触发事件
   - 自定义键名：`Vue.config.keyCodes.自定义键名 = 键码`，用于定制键名
4. 自定义修饰符：

## 3.3 组件注册

1. 全局组件
2. 局部组件
3. 异步组件

## 3.4 组件传值

### 1. 父传子

- **props数组**：Prop 是可以在组件上注册的一些自定义 attribute。当一个值传递给一个 prop attribute 的时候，它就变成了那个组件实例的一个 property。可以用一个 `props` 选项将其包含在该组件可接受的 prop 列表中：列表中可以拥有任意数量的 prop，任何值都可以传递给任何 prop。子组件实例中访问这个值，就像访问 `data` 中的值一样。

  ```html
  <blog-post title="My journey with Vue"></blog-post>
  <blog-post title="Blogging with Vue"></blog-post>
  <blog-post title="Why Vue is so fun"></blog-post>
  
  <script>
      Vue.component('blog-post', {
        props: ['title'],
        template: '<h3>{{ title }}</h3>'
      })
  </script>
  ```

- **props对象**：props中的参数可以以对象形式列出 prop，这些 property 的名称和值分别是 prop 各自的名称和类型；并且可以为 `props` 中的值提供一个带有验证需求的对象，

  ```js
  Vue.component('my-component', {
    props: {
      // 基础的类型检查 (`null` 和 `undefined` 会通过任何类型验证)
      propA: Number,
      // 多个可能的类型
      propB: [String, Number],
      // 必填的字符串
      propC: {
        type: String,
        required: true
      },
      // 带有默认值的数字
      propD: {
        type: Number,
        default: 100
      },
      // 带有默认值的对象
      propE: {
        type: Object,
        // 对象或数组默认值必须从一个工厂函数获取
        default: function () {
          return { message: 'hello' }
        }
      },
      // 自定义验证函数
      propF: {
        validator: function (value) {
          // 这个值必须匹配下列字符串中的一个
          return ['success', 'warning', 'danger'].indexOf(value) !== -1
        }
      }
    }
  })
  ```

### 2. 子传父

- **自定义事件注意点**：不同于组件和 prop，事件名不会被用作一个 JavaScript 变量名或 property 名，所以不建议使用驼峰命名；由于html大小写不敏感，事件名称会转为全小写，在事件命名推荐使用中横线连接符；

- 数据传输原理是通过子组件的自定义事件将数据以参数的方式传递出去，在使用组件的地方绑定事件并接收参数完成数据传递

  ```html
  1. 子组件中定义事件并绑定参数
  <template id="cpn" >
      <div>
          子组件输入框: <input type="text" @input="inputChange">
      </div>
  </template>
  <script>
      const cpn = Vue.extend({
          template: `#cpn`,
          methods: {
              inputChange (event){
                  this.$emit('sub-change',event.data)
              }
          }
      })
  </script>
  
  2. 在使用组件的部分绑定事件并接收参数
  <div id="app">
      子组件-- <cpn @sub-change="subChange"></cpn>
  </div>
  <script>
      const vm = new Vue({
          el: '#app',
          components: {
              cpn: cpn
          },
          methods: {
              subChange (data) {
                 console.log(data)
              }
          }
      })
  </script>
  ```

- **.sync 修饰符**：

- **.native 修饰符**：

### 3. 同级传值

- **一般大型的项目，推荐使用Vuex来管理组件之间的通信**

- 同级组件不能直接传值，需要一个中间桥梁，可以先将数据传递给公共的父组件，然后父组件再将数据传递给需要的子组件。

  ```html
  <script>
      // 1. 创建一个公共桥梁作为
      const bus = new Vue()
      // 2. 在数据发送方自定义事件将数据发送桥梁
      methods: {
          cpn1Change(event){
              bus.$emit('cnp-one-change',event.data)
          }
      }
      // 3. 在数据接收方的mounted时间钩子函数中始化完成，就开始执行定义的方法
      mounted () {
          bus.$on('cnp-one-change',(val) => {
          })
      }
  </script>
  ```

### 4. $refs

- ref：被用来给元素或子组件注册引用信息，如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件实例：

  ```html
  <!-- `vm.$refs.p` DOM 元素 -->
  <p ref="p">hello</p>
  
  <!-- `vm.$refs.child` 组件实例 -->
  <child-component ref="child"></child-component>
  ```

- $refs：ref引用信息将会注册在父组件的 `$refs` 对象上

  - 当 `v-for` 用于元素或组件的时候，引用信息将是包含 DOM 节点或组件实例的数组。
  - 当引入DOM元素时候：ref 本身是作为渲染结果被创建的，在初始渲染的时候你不能访问它们
  - 当引入组件实例时候：`$refs` 也不是响应式的，不应该在模板中做数据绑定。

### 5. $root

- 当前组件树的根 Vue 实例。

### 6. $parent

- 父实例，如果当前实例有的话。

### 7. $children 

- 当前实例的直接子组件。**需要注意 `$children` 并不保证顺序，也不是响应式的。**如果你发现自己正在尝试使用 `$children` 来进行数据绑定，考虑使用一个数组配合 `v-for` 来生成子组件，并且使用 Array 作为真正的来源。

## 3.5 组件插槽

### 1. 插槽概述

### 2. 插槽入门

### 3. 插槽：name

### 4. 插槽：slot-scope

## 3.6 内置组件

