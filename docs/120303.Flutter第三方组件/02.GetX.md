---
title: 第二章 GetX
date: 2022-01-03 00:03:02
permalink: /pages/d79f55/
categories:
  - Flutter第三方组件
tags:
  - 
author: 
  name: xiaoliuxuesheng
  link: https://gitee.com/xiaoliuxuesheng
---
# GitX概述

1. GetX是Flutter高性能的状态管理、智能的依赖注入、便捷的路由管理

2. GetX优点：

   - BLoc学习难度高
   - MobX比BLoc更容易，但是对于大型应用不适合
   - Provider太依赖Widget

3. GetX安装

   ```yaml
   dependence:
     get: ^4.3.8
   ```

   ```dart
   // 导入
   import 'package:get/get.dart'
   ```

# GetX核心

## 1.1 路由管理



## 1.2 状态管理

## 1.3 权限控制

## 1.4 依赖注入



# GetX系列

## 2.1 SnackBar

1. SnackBar作用：如果想在应用中触发特定事件后，需要弹出快捷消息，可以使用SnackBar

2. SnackBar基本使用：使用SnackBar就不能使用MaterApp作为顶层，需要使用GetMaterialApp作为顶层

   - 第一步：使用GetMaterialApp

     ```dart
     import 'package:flutter/material.dart';
     import 'package:get/get.dart';
     
     // 引入子组件
     import 'case01_snackBar.dart';
     
     class MyApp extends StatelessWidget {
       const MyApp({super.key});
     
       @override
       Widget build(BuildContext context) {
         /*** 使用GetMaterialApp ****/
         return const GetMaterialApp(
           title: "GetX",
           home: HomeWidget()
         );
       }
     }
     
     ```

   - 第二步：引入SnackBar

     ```dart
     import 'package:flutter/material.dart';
     import 'package:get/get.dart';
     
     class HomeWidget extends StatefulWidget {
       const HomeWidget({super.key});
     
       @override
       State<HomeWidget> createState() => _HomeWidgetState();
     }
     
     class _HomeWidgetState extends State<HomeWidget> {
       @override
       Widget build(BuildContext context) {
         return Scaffold(
           appBar: AppBar(title: const Text("GetX Case01"),),
           body: Center(
             child: Column(
               mainAxisAlignment: MainAxisAlignment.center,
               crossAxisAlignment: CrossAxisAlignment.center,
               children: [
                 ElevatedButton(onPressed: () {
                   /*** 在按钮的回调事件里直接调用snackbar函数，传入参数 ****/
                   Get.snackbar("SnackBare标题","SnackBar消息");
                 }, child: const Text("按钮"))
               ],
             ),
           ),
         );
       }
     }
     ```

3. SnackBar属性说明

   ```dart
   SnackbarController snackbar(
       String title,
       String message, 
       {
           Color? colorText,
           Duration? duration = const Duration(seconds: 3),
           bool instantInit = true,
           SnackPosition? snackPosition,
           Widget? titleText,
           Widget? messageText,
           Widget? icon,
           bool? shouldIconPulse,
           double? maxWidth,
           EdgeInsets? margin,
           EdgeInsets? padding,
           double? borderRadius,
           Color? borderColor,
           double? borderWidth,
           Color? backgroundColor,
           Color? leftBarIndicatorColor,
           List<BoxShadow>? boxShadows,
           Gradient? backgroundGradient,
           TextButton? mainButton,
           OnTap? onTap,
           bool? isDismissible,
           bool? showProgressIndicator,
           DismissDirection? dismissDirection,
           AnimationController? progressIndicatorController,
           Color? progressIndicatorBackgroundColor,
           Animation<Color>? progressIndicatorValueColor,
           SnackStyle? snackStyle,
           Curve? forwardAnimationCurve,
           Curve? reverseAnimationCurve,
           Duration? animationDuration,
           double? barBlur,
           double? overlayBlur,
           SnackbarStatusCallback? snackbarStatus,
           Color? overlayColor,
           Form? userInputForm,
       }
   )
   ```

   | SnackBar属性-必须                | 默认值     | 说明                   |
   | -------------------------------- | ---------- | ---------------------- |
   | title                            |            | 弹出框标题             |
   | message                          |            | 弹出消息               |
   | **SnackBar属性-命名参数**        | **默认值** | **说明**               |
   | colorText                        |            | 字体颜色               |
   | duration                         | 3秒        | 持续时间               |
   | ~~instantInit~~                  |            |                        |
   | snackPosition                    |            | 弹出层位置             |
   | titleText                        |            | 覆盖必填参数title      |
   | messageText                      |            | 覆盖必填参数message    |
   | icon                             |            | 弹出层左边显示的图标   |
   | shouldIconPulse                  |            | icon是否闪烁           |
   | maxWidth                         |            | 弹窗框最大宽度         |
   | margin                           |            | 外边距                 |
   | padding                          |            | 内边距                 |
   | borderRadius                     |            | 边框圆角               |
   | borderColor                      |            | 边框颜色               |
   | borderWidth                      |            | 边框宽度               |
   | backgroundColor                  |            | 背景色                 |
   | leftBarIndicatorColor            |            | 左边指示器颜色         |
   | boxShadows                       |            | 盒子阴影               |
   | backgroundGradient               |            | 背景渐变               |
   | mainButton                       |            | 弹框上显示的按钮       |
   | onTap                            |            | 弹框被打开被点击的回调 |
   | isDismissible                    |            | 弹框是否可以拖动       |
   | dismissDirection                 |            | 弹框拖动方向           |
   | showProgressIndicator            |            | 弹框消失进度条         |
   | progressIndicatorController      |            |                        |
   | progressIndicatorBackgroundColor |            | 进度条颜色             |
   | snackStyle                       |            |                        |
   | forwardAnimationCurve            |            | 进入动画               |
   | reverseAnimationCurve            |            | 退出动画               |
   | animationDuration                |            | 动画时长               |
   | barBlur                          |            | 背景毛玻璃百分比       |
   | overlayBlur                      |            | 背景蒙版               |
   | overlayColor                     |            | 蒙版背景色             |
   | snackbarStatus                   |            | 弹框状态               |
   | userInputForm                    |            | 用户输入弹窗           |

## 2.2 Dialog

1. Dialog作用：二次确认的弹窗框

2. Dialog使用：

   - 第一步：使用GetMaterialApp

   - 第二步：引入Dialog：`Get.defaultDialog()`

     ```dart
     import 'package:flutter/material.dart';
     import 'package:get/get.dart';
     
     class HomeWidget extends StatefulWidget {
         const HomeWidget({super.key});
     
         @override
         State<HomeWidget> createState() => _HomeWidgetState();
     }
     
     class _HomeWidgetState extends State<HomeWidget> {
         @override
         Widget build(BuildContext context) {
             return Scaffold(
                 appBar: AppBar(title: const Text("GetX Case02 dialog"),),
                 body: Center(
                     child: Column(
                         mainAxisAlignment: MainAxisAlignment.center,
                         crossAxisAlignment: CrossAxisAlignment.center,
                         children: [
                             ElevatedButton(onPressed: () {
                                 Get.defaultDialog();
                             }, child: const Text("按钮"))
                         ],
                     ),
                 ),
             );
         }
     }
     ```

3. Dialog属性说明

   ```dart
   Future<T?> defaultDialog<T>({
       String title = "Alert",
       EdgeInsetsGeometry? titlePadding,
       TextStyle? titleStyle,
       Widget? content,
       EdgeInsetsGeometry? contentPadding,
       VoidCallback? onConfirm,
       VoidCallback? onCancel,
       VoidCallback? onCustom,
       Color? cancelTextColor,
       Color? confirmTextColor,
       String? textConfirm,
       String? textCancel,
       String? textCustom,
       Widget? confirm,
       Widget? cancel,
       Widget? custom,
       Color? backgroundColor,
       bool barrierDismissible = true,
       Color? buttonColor,
       String middleText = "Dialog made in 3 lines of code",
       TextStyle? middleTextStyle,
       double radius = 20.0,
       List<Widget>? actions,
       WillPopCallback? onWillPop,
       GlobalKey<NavigatorState>? navigatorKey,
   })
   ```

   | Dialog属性 - 命名参数 | 默认值 | 说明 |
   | --------------------- | ------ | ---- |
   |                       |        |      |

## 2.3 ButtonSheet

1. ButtonSheet作用：是底部弹窗的一个组件，常用于单选、验证码二次弹窗校验

2. ButtonSheet使用：

   - 第一步：
   - 第二步：

3. ButtonSheet属性

   ```dart
   ```

   | Button属性 | 默认值 | 说明 |
   | ---------- | ------ | ---- |
   |            |        |      |

## 2.4 Navigation路由

1. Navigation作用：主要是用于路由跳转，只需要调用Get.go()即可进行路由跳转，并且可以设置跳转动画

2. Navigation使用：

   - 第一步：
   - 第二步：①to②toNamed

3. ButtonSheet属性

   ```dart
   
   ```

   | Button属性 | 默认值 | 说明 |
   | ---------- | ------ | ---- |
   |            |        |      |

## 2.5 Obx响应式状态管理

1. Obx作用：响应式状态管理
2. Obx使用：
   - 定义变量方式一：RtString、RtBool、RtInt、RtDouble、`RtList<String>`、`RtMap<String,Int>`
   - 定义变量方式二：`Rt<T>`
   - 定义变量方式三：[value].obs

## 2.6 GetxController

1. GetxController作用：在实际项目开发中不肯能把UI代码、业务逻辑放在一起处理，GetxController用户把UI代码和业务逻辑分离开来
2. GetxController的使用方式一：
   - 第一步：使用GetMaterialApp
   - 第二步：自定义Controller集成GetxController
     - 定义状态
     - 获取状态
3. GetxController的使用方式二：
   - 第一步：使用GetMaterialApp
   - 第二步：自定义Controller集成GetxController
     - 定义状态
     - 获取状态
4. GetxController的使用方式三：
   - 第一步：使用GetMaterialApp
   - 第二步：自定义Controller集成GetxController
     - 定义状态
     - 获取状态

## 2.7 GetxController事件监听

1. 事件监听概述：监听单个值，监听多个值

2. 事件监听使用方式

   - 第一步：使用GetMaterialApp

   - 第二步：定义自定义GetController

   - 第三步：重写onlinit监听事件

     | 监听方法 | 说明                           |
     | -------- | ------------------------------ |
     | ever     | 监听的值发生改变时调用         |
     | everall  | 监听多个值，在发送改变时调用   |
     | once     | 监听的值改变时调用，只执行一次 |
     | debounce | 用户停止输入1秒回调用，        |
     | interval | 忽略3秒内的所有变动            |

   - 第四步：在控制器使用监听

## 2.8 GetxController生命周期

1. 初始化：onInit
2. 加载完成：onReady
3. 销毁：onClose

## 2.8 GetXUniqueId

1. 使用场景：在开发中可能存在多个地方引用同一个属性，但是只需要单独在某一个地方更新，使用Unique区分

2. 是否方式

   - 第一步：使用GetMaterialApp

   - 第二步：定义自定义GetController，并且定义UniqueID

     ```dart
     update(['更新时候指定的UniqueId'])
     ```

   - 第三步在 引用的GetBuilder中指定相同的ID属性

## 2.9 Getx国际化

1. Getx国际化使用方式

   - 第一步：使用GetMaterialApp，并且添加国际化配置

     - translations：国际化配置文件
     - local：默认设置语言，默认是系统当前语言
     - fallbackLocal：配置错误的情况下使用的语言

   - 第二步：创建一个国际化类

     ```dart
     class Message extend Translations{
         @override
         Map<String,Map<String,String>> get keys = {
             "zh_CN":{
                 "hello":"你好世界"
             },
             "en_US":{
                 "hello":"Hello World"
             },
         }
     }
     ```

   - 第三步：在MessageController中定义方法，接受当前语言环境参数和需要国际化的key，返回国际化的值

   - 第四步：调用GetXController中的国际化获取结果展示

     ```dart
     "".tr
     ```

## 2.10 Getx依赖注入

1. GetxService：类似GetxController，共享相同的声明周期，但是里面没有逻辑，只是通知GetX的依赖注入系统，这个子类不能从内存中删除，所以如果需要再应用程序中对一个实例进行相对的持久化，使用GetxService

2. GetxService使用方式:

   - 创建自定义Service

     ```dart
     class MyService extend GetxService{
         
     }
     ```

   - 初始化Service

   - 

## 2.11 GetXBinding

