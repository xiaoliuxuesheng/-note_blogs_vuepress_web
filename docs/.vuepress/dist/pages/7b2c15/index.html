<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ViteTs项目搭建 | xiaoliuxuesheng</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/note_blogs_vuepress_web/img/favicon.ico">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/note_blogs_vuepress_web/assets/css/0.styles.9a0b7a11.css" as="style"><link rel="preload" href="/note_blogs_vuepress_web/assets/js/app.4ea283e3.js" as="script"><link rel="preload" href="/note_blogs_vuepress_web/assets/js/2.ceef22bc.js" as="script"><link rel="preload" href="/note_blogs_vuepress_web/assets/js/52.f4a61621.js" as="script"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/10.cb0c7815.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/11.6e55625a.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/12.df1e9dd7.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/13.20faff70.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/14.5cf86053.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/15.e8435a57.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/16.825ef472.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/17.1cd4e5e8.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/18.7022d666.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/19.850e0b1c.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/20.3e1bc557.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/21.04f094ea.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/22.074fe44f.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/23.e780e66f.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/24.e602fdcf.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/25.8f4e7839.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/26.4fccea36.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/27.0cdab409.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/28.042a5ceb.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/29.bc8e0d77.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/3.93d2e1f8.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/30.66a70a06.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/31.1efdb003.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/32.8fe6250d.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/33.d3ca66cc.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/34.b439cf3b.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/35.9c79af7a.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/36.91957c32.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/37.7b9d03a2.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/38.ac8a066b.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/39.f1624427.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/4.94dce7a4.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/40.97af925c.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/41.a6b32f8b.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/42.d8a0c116.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/43.cbf9701e.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/44.187000c4.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/45.6b337888.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/46.1b8766ae.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/47.4b40beb4.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/48.dd798a23.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/49.d85b96d1.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/5.c116b26f.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/50.a98616c7.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/51.6834f531.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/53.2429ac68.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/54.8207fc34.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/55.71d62366.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/56.b02df49d.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/57.1c683545.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/58.3849b441.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/59.618101ea.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/6.35aba0bf.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/60.5106cb25.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/61.9247097a.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/62.dc1b7ddc.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/63.b403ba37.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/64.6c3886c8.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/65.d223e221.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/66.ff2f62fb.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/67.c1e89009.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/68.7ab86404.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/69.c40d3d38.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/7.4c9dd1ba.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/70.21087425.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/71.70604bf9.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/72.b4ea7295.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/73.5376a72b.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/74.6e5c0b77.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/8.a3da137c.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/9.f8141f29.js">
    <link rel="stylesheet" href="/note_blogs_vuepress_web/assets/css/0.styles.9a0b7a11.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu only-sidebarItem"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note_blogs_vuepress_web/" class="home-link router-link-active"><img src="/note_blogs_vuepress_web/img/logo.png" alt="xiaoliuxuesheng" class="logo"> <span class="site-name can-hide">xiaoliuxuesheng</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note_blogs_vuepress_web/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/note_blogs_vuepress_web/webBase/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/base/" class="nav-link">CSS基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/select/" class="nav-link">CSS选择器</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/attr/" class="nav-link">CSS常用属性</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/layout/" class="nav-link">CSS布局</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/new/" class="nav-link">CSS新特性</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/c73bb2/" class="nav-link">Dart</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><a href="/note_blogs_vuepress_web/webHight/" class="link-title">前端进阶</a> <span class="title" style="display:none;">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/c96fd9/" class="nav-link">TypeScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><a href="/note_blogs_vuepress_web/webFw/" class="link-title">前端框架</a> <span class="title" style="display:none;">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/base/" class="nav-link">Vue基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/home/" class="nav-link">Vue进阶</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/project/" class="nav-link">Vue项目搭建</a></li></ul></li><li class="dropdown-item"><h4>Flutter</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/base/" class="nav-link">Flutter基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/wedget/" class="nav-link">Flutter组件</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/third/" class="nav-link">Flutter第三方组件</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/hight/" class="nav-link">Flutter高级</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/note_blogs_vuepress_web/webLib/" class="nav-link">前端库</a></div><div class="nav-item"><a href="/note_blogs_vuepress_web/#" class="nav-link">|</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/note_blogs_vuepress_web/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/note_blogs_vuepress_web/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/note_blogs_vuepress_web/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/note_blogs_vuepress_web/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://s1.ax1x.com/2023/03/18/ppJs44s.png"> <div class="blogger-info"><h3>小刘学生</h3> <span>土木工程毕业的程序员</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/note_blogs_vuepress_web/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/note_blogs_vuepress_web/webBase/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/base/" class="nav-link">CSS基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/select/" class="nav-link">CSS选择器</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/attr/" class="nav-link">CSS常用属性</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/layout/" class="nav-link">CSS布局</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/new/" class="nav-link">CSS新特性</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/c73bb2/" class="nav-link">Dart</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><a href="/note_blogs_vuepress_web/webHight/" class="link-title">前端进阶</a> <span class="title" style="display:none;">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/c96fd9/" class="nav-link">TypeScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><a href="/note_blogs_vuepress_web/webFw/" class="link-title">前端框架</a> <span class="title" style="display:none;">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/base/" class="nav-link">Vue基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/home/" class="nav-link">Vue进阶</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/project/" class="nav-link">Vue项目搭建</a></li></ul></li><li class="dropdown-item"><h4>Flutter</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/base/" class="nav-link">Flutter基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/wedget/" class="nav-link">Flutter组件</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/third/" class="nav-link">Flutter第三方组件</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/hight/" class="nav-link">Flutter高级</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/note_blogs_vuepress_web/webLib/" class="nav-link">前端库</a></div><div class="nav-item"><a href="/note_blogs_vuepress_web/#" class="nav-link">|</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/note_blogs_vuepress_web/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/note_blogs_vuepress_web/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/note_blogs_vuepress_web/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/note_blogs_vuepress_web/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/note_blogs_vuepress_web/pages/7b2c15/" aria-current="page" class="active sidebar-link">ViteTs项目搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/7b2c15/#_1-1-vue项目创建" class="sidebar-link">1.1 Vue项目创建</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/7b2c15/#_1-2-vite项目配置" class="sidebar-link">1.2 Vite项目配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/note_blogs_vuepress_web/pages/7b2c15/#_1-启动端口配置" class="sidebar-link">1. 启动端口配置</a></li><li class="sidebar-sub-header level3"><a href="/note_blogs_vuepress_web/pages/7b2c15/#_2-设置路径别名" class="sidebar-link">2. 设置路径别名</a></li><li class="sidebar-sub-header level3"><a href="/note_blogs_vuepress_web/pages/7b2c15/#_3-集成axios" class="sidebar-link">3. 集成Axios</a></li><li class="sidebar-sub-header level3"><a href="/note_blogs_vuepress_web/pages/7b2c15/#_4-添加环境配置文件" class="sidebar-link">4. 添加环境配置文件</a></li><li class="sidebar-sub-header level3"><a href="/note_blogs_vuepress_web/pages/7b2c15/#_5-集成mockjs" class="sidebar-link">5. 集成MockJS</a></li><li class="sidebar-sub-header level3"><a href="/note_blogs_vuepress_web/pages/7b2c15/#_6-集成router4" class="sidebar-link">6. 集成router4</a></li><li class="sidebar-sub-header level3"><a href="/note_blogs_vuepress_web/pages/7b2c15/#_7-集成sass" class="sidebar-link">7. 集成Sass</a></li><li class="sidebar-sub-header level3"><a href="/note_blogs_vuepress_web/pages/7b2c15/#_8-icon组件封装" class="sidebar-link">8. Icon组件封装</a></li></ul></li></ul></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/note_blogs_vuepress_web/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/note_blogs_vuepress_web/vue/project/#Vue项目搭建" data-v-06225672>Vue项目搭建</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://gitee.com/xiaoliuxuesheng" target="_blank" title="作者" class="beLink" data-v-06225672>xiaoliuxuesheng</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-05-13</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">ViteTs项目搭建<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="_1-1-vue项目创建"><a href="#_1-1-vue项目创建" class="header-anchor">#</a> 1.1 Vue项目创建</h2> <blockquote><p>使用Vite创建Vue项目：Vite官网：https://cn.vitejs.dev/guide/</p></blockquote> <ul><li><p>使用Vite搭建Vue项目</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> create vite
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>? Project name: » web-tmp-vite-ts

? Select a framework: » - Use arrow-keys. Return to submit.
    Vanilla
<span class="token operator">&gt;</span>   Vue
    React
    Preact
    Lit
    Svelte
    Others
    
<span class="token operator">&gt;</span>   TypeScript
    JavaScript
    Customize with create-vue ↗
    Nuxt ↗
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></blockquote></li> <li><p>创建完成</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Done. Now run:

  <span class="token builtin class-name">cd</span> web-tmp-vite-ts
  <span class="token function">pnpm</span> <span class="token function">install</span>
  <span class="token function">pnpm</span> run dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h2 id="_1-2-vite项目配置"><a href="#_1-2-vite项目配置" class="header-anchor">#</a> 1.2 Vite项目配置</h2> <h3 id="_1-启动端口配置"><a href="#_1-启动端口配置" class="header-anchor">#</a> 1. 启动端口配置</h3> <ul><li><p>修改配置文件：vite.config.ts中新增<code>server</code>配置项</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    server<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 是否自动打开浏览器</span>
        open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 服务器主机名，如果允许外部访问，可设置为&quot;0.0.0.0&quot;</span>
        host<span class="token operator">:</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span>
        <span class="token comment">// 服务器端口号</span>
        port<span class="token operator">:</span> <span class="token number">8090</span><span class="token punctuation">,</span>
        <span class="token comment">// 设为 true ,若端口已被占用则会直接退出，而不是尝试下一个可用端口</span>
        strictPort<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token comment">// 为开发服务器配置 CORS</span>
        cors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置为 true 强制使依赖预构建</span>
        force<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>启动：pnpm run dev</p> <p>Port 8090 is in use, trying another one...</p> <p>VITE v4.3.2  ready in 307 ms</p> <p>➜  Local:   http://localhost:8091/<br>
➜  Network: http://192.168.132.1:8091/
➜  Network: http://192.168.10.1:8091/
➜  Network: http://192.168.0.106:8091/</p></blockquote></li></ul> <h3 id="_2-设置路径别名"><a href="#_2-设置路径别名" class="header-anchor">#</a> 2. 设置路径别名</h3> <ul><li><p>安装路径解析依赖包</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> i @types/node <span class="token parameter variable">-D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>配置文件中添加别名配置项：vite.config.ts中的resolve</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// 路径解析器</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>resolve<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'path'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
      alias<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'@'</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.ts'</span><span class="token punctuation">,</span> <span class="token string">'.vue'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">,</span> <span class="token string">'.scss'</span><span class="token punctuation">,</span> <span class="token string">'.css'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>在tsconfig.json配置中添加路径解析配置</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用于设置解析非相对模块名称的基本目录，相对模块不会受到baseUrl的影响</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 用于设置模块名到基于baseUrl的路径映射</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>测试别名：修改App.vue中的HelloWorld的import</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">'@/components/HelloWorld'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="_3-集成axios"><a href="#_3-集成axios" class="header-anchor">#</a> 3. 集成Axios</h3> <blockquote><p>axios官网：https://www.axios-http.cn/</p> <p>Github地址：https://github.com/axios/axios</p></blockquote> <ul><li><p>安装axios相关依赖</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> axios
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>axios封装<code>AxiosClient.ts</code>：①请求响应拦截器需要进行扩展、②单个请求的配置可以覆盖默认的请求信息、③自定义请求扩展参数</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>
    AxiosInstance<span class="token punctuation">,</span>
    AxiosResponse<span class="token punctuation">,</span>
    AxiosRequestConfig<span class="token punctuation">,</span>
    InternalAxiosRequestConfig<span class="token punctuation">,</span>
    AxiosRequestHeaders<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>


<span class="token comment">// 拦截器配置：由实际业务的http进行配置</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">InterceptorHook</span> <span class="token punctuation">{</span>
    requestInterceptor<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>config<span class="token operator">:</span> InternalAxiosRequestConfig<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> InternalAxiosRequestConfig
    requestInterceptorCatch<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span>
    responseInterceptor<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>response<span class="token operator">:</span> AxiosResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> AxiosResponse <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>AxiosResponse<span class="token operator">&gt;</span>
    responseInterceptorCatch<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>

<span class="token comment">// 拦截器请求config</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">InterceptorRequestConfig<span class="token operator">&lt;</span><span class="token constant">D</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">InternalAxiosRequestConfig<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    interceptorHooks<span class="token operator">?</span><span class="token operator">:</span> InterceptorHook
    requestOptions<span class="token operator">?</span><span class="token operator">:</span> RequestOptions
<span class="token punctuation">}</span>

<span class="token comment">// 拓展axios请求参数，加入自己的配置</span>
<span class="token keyword">interface</span> <span class="token class-name">RequestOptions</span> <span class="token punctuation">{</span>
    <span class="token comment">// 是否全局展示请求 错误信息</span>
    globalErrorMessage<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
    <span class="token comment">// 是否全局展示请求 成功信息</span>
    globalSuccessMessage<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token comment">// 自定义Axios请求config</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">RequestConfig<span class="token operator">&lt;</span><span class="token constant">D</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AxiosRequestConfig<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    interceptorHooks<span class="token operator">?</span><span class="token operator">:</span> InterceptorHook
    requestOptions<span class="token operator">?</span><span class="token operator">:</span> RequestOptions
<span class="token punctuation">}</span>

<span class="token comment">// 自定义Axios响应config</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ResponseConfig<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">D</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AxiosResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">D</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    config<span class="token operator">:</span> InterceptorRequestConfig<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Request</span> <span class="token punctuation">{</span>
    <span class="token comment">// axios 实例</span>
    <span class="token keyword">private</span> _instance<span class="token operator">:</span> AxiosInstance
    <span class="token keyword">private</span> _interceptorHooks<span class="token operator">?</span><span class="token operator">:</span> InterceptorHook
    <span class="token comment">// 默认配置</span>
    <span class="token keyword">private</span> _defaultConfig<span class="token operator">:</span> RequestConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
        baseURL<span class="token operator">:</span> <span class="token string">'/api'</span><span class="token punctuation">,</span>
        timeout<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
        requestOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            globalErrorMessage<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            globalSuccessMessage<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        headers<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> AxiosRequestHeaders<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>config<span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用axios.create创建axios实例</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_defaultConfig<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_interceptorHooks <span class="token operator">=</span> config<span class="token punctuation">.</span>interceptorHooks
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setupInterceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 通用拦截，在初始化时就进行注册和运行，对基础属性进行处理</span>
    <span class="token keyword">private</span> <span class="token function">setupInterceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_interceptorHooks<span class="token operator">?.</span>requestInterceptor<span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_interceptorHooks<span class="token operator">?.</span>requestInterceptorCatch
        <span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_interceptorHooks<span class="token operator">?.</span>responseInterceptor<span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_interceptorHooks<span class="token operator">?.</span>responseInterceptorCatch
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 定义核心请求</span>
    <span class="token keyword">public</span> <span class="token function">request</span><span class="token punctuation">(</span>config<span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>AxiosResponse<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ！！！?? 注意：axios 已经将请求使用 promise 封装过了</span>
        <span class="token comment">// 这里直接返回，不需要我们再使用 promise 封装一层</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token generic-function"><span class="token function">put</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">delete</span><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br></div></div><blockquote><p>扩展请求参数，自定义请求参数类型：如下加入消息提示的配置</p> <p>新版本Axios的请求的config类型：InternalAxiosRequestConfig，自定义请求和响应对添加拦截回调和请求参数进行封装：响应结构中会带请求配置信息，所以修改了请求的config，同时需要修改响应结果的config</p></blockquote></li> <li><p>根据封装的Axios定义业务请求的Http</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Request<span class="token punctuation">,</span> InterceptorHook<span class="token punctuation">,</span> ResponseConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/util/AxiosClient'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> AxiosRequestHeaders <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token comment">// 请求拦截器</span>
<span class="token keyword">const</span> transform<span class="token operator">:</span> InterceptorHook <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 请求</span>
    <span class="token function">requestInterceptor</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 请求头部处理，如添加 token</span>
        <span class="token keyword">return</span> config
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 异常拦截</span>
    <span class="token function">requestInterceptorCatch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 请求错误，这里可以用全局提示框进行提示</span>
        <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 响应拦截</span>
    <span class="token function">responseInterceptor</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> result <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// 因为 axios 返回不支持扩展自定义配置，需要自己断言一下</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> result <span class="token keyword">as</span> ResponseConfig
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> res <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 开启全局提示</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>config<span class="token punctuation">.</span>requestOptions<span class="token operator">?.</span>globalSuccessMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 这里全局提示请求成功</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这里全局提示请求成功'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 与后端约定的请求成功码 这里全局提示请求成功</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>config<span class="token punctuation">.</span>requestOptions<span class="token operator">?.</span>globalSuccessMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 请求返回值，建议将 返回值 进行解构</span>
        <span class="token keyword">return</span> res<span class="token punctuation">.</span>data
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">responseInterceptorCatch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里用来处理 http 常见错误，进行全局提示</span>
        <span class="token keyword">const</span> mapErrorStatus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token punctuation">[</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">'请求方式错误'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">401</span><span class="token punctuation">,</span> <span class="token string">'请重新登录'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">403</span><span class="token punctuation">,</span> <span class="token string">'拒绝访问'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token string">'请求地址有误'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">'服务器出错'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> message <span class="token operator">=</span> mapErrorStatus<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'请求出错，请稍后再试'</span>
        <span class="token comment">// 此处全局报错</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// 具体使用时先实例一个请求对象</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// baseURL: '/api',</span>
    timeout<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
    interceptorHooks<span class="token operator">:</span> transform<span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span> Authorization<span class="token operator">:</span> <span class="token string">'tokenaaaaa'</span> <span class="token punctuation">}</span> <span class="token keyword">as</span> AxiosRequestHeaders<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div></li> <li><p>测试API请求</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IPType</span> <span class="token punctuation">{</span>
    asn<span class="token operator">:</span> <span class="token builtin">string</span>
    city<span class="token operator">:</span> <span class="token builtin">string</span>
    continent_code<span class="token operator">:</span> <span class="token builtin">string</span>
    country<span class="token operator">:</span> <span class="token builtin">string</span>
    country_area<span class="token operator">:</span> <span class="token builtin">string</span>
    country_calling_code<span class="token operator">:</span> <span class="token builtin">string</span>
    country_capital<span class="token operator">:</span> <span class="token builtin">string</span>
    country_code<span class="token operator">:</span> <span class="token builtin">string</span>
    country_code_iso3<span class="token operator">:</span> <span class="token builtin">string</span>
    country_name<span class="token operator">:</span> <span class="token builtin">string</span>
    country_population<span class="token operator">:</span> <span class="token builtin">string</span>
    country_tld<span class="token operator">:</span> <span class="token builtin">string</span>
    currency<span class="token operator">:</span> <span class="token builtin">string</span>
    currency_name<span class="token operator">:</span> <span class="token builtin">string</span>
    in_eu<span class="token operator">:</span> <span class="token builtin">boolean</span>
    ip<span class="token operator">:</span> <span class="token builtin">string</span>
    languages<span class="token operator">:</span> <span class="token builtin">string</span>
    latitude<span class="token operator">:</span> <span class="token builtin">number</span>
    longitude<span class="token operator">:</span> <span class="token builtin">number</span>
    network<span class="token operator">:</span> <span class="token builtin">string</span>
    org<span class="token operator">:</span> <span class="token builtin">string</span>
    postal<span class="token operator">:</span> <span class="token builtin">string</span>
    region<span class="token operator">:</span> <span class="token builtin">string</span>
    region_code<span class="token operator">:</span> <span class="token builtin">string</span>
    timezone<span class="token operator">:</span> <span class="token builtin">string</span>
    utc_offset<span class="token operator">:</span> <span class="token builtin">string</span>
    version<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>RequestConfig<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/util/AxiosClient'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>request<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/util/UserHttp'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>IPType<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/types/IPType'</span>

<span class="token keyword">const</span> config<span class="token operator">:</span>RequestConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  requestOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    globalSuccessMessage<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
request<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>IPType<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'https://ipapi.co/8.8.8.8/json/'</span><span class="token punctuation">,</span>config<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>asn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>currency_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ul> <h3 id="_4-添加环境配置文件"><a href="#_4-添加环境配置文件" class="header-anchor">#</a> 4. 添加环境配置文件</h3> <ul><li><p>在项目根目录定义配置文件：<code>.evn.环境标识</code></p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>.env.mock
.env.dev
.env.test
.dev.prod
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>添加测定配置内容：配置文件中属性必须是<code>VITE_</code>开头</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">VITE_MODE_NAME</span><span class="token punctuation">=</span><span class="token value attr-value">mock</span>
<span class="token key attr-name">VITE_BASE_URL</span><span class="token punctuation">=</span><span class="token value attr-value">http://localhost:9002/mock/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>package.json新增启动script，指定启动环境</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;mock&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite  --mode mock&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite  --mode dev&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite  --mode test&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;prod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite  --mode prod&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>读取配置文件中配置信息</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> env <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_BASE_URL</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>运行项目测试读取配置</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> run mock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="_5-集成mockjs"><a href="#_5-集成mockjs" class="header-anchor">#</a> 5. 集成MockJS</h3> <ul><li><p>安装Mock.js依赖及插件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> i --save-dev @types/mockjs
<span class="token function">pnpm</span> <span class="token function">install</span> vite-plugin-mock cross-env <span class="token parameter variable">-D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>置Mock插件：在<code>vite.config.ts</code>添加Mock插件配置</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token comment">// 路径解析器</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>resolve<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>viteMockServe<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite-plugin-mock&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 插件中添加mockServer</span>
    <span class="token function">viteMockServe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 解析根目录下的mock文件夹</span>
      mockPath<span class="token operator">:</span> <span class="token string">'mock'</span><span class="token punctuation">,</span>
      <span class="token comment">// 开发打包开关</span>
      localEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// 生产打包开关</span>
      prodEnabled<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// 打开后，可以读取 ts 文件模块。 请注意，打开后将无法监视.js 文件。</span>
      supportTs<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// 监视文件更改</span>
      watchFiles<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  server<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在server中添加mock代理</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;/mock&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">'http://localhost:8090'</span><span class="token punctuation">,</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/mock</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div></li> <li><p>根目录中新建mock目录添加Mock脚本</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// 测试脚本: /mock/TestMock.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>MockMethod<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite-plugin-mock&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userApis<span class="token operator">:</span>MockMethod<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">'/mock/product'</span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">response</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">{</span>
                code<span class="token operator">:</span> <span class="token number">200200</span><span class="token punctuation">,</span>
                msg<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
                data<span class="token operator">:</span> <span class="token punctuation">{</span>
                    name<span class="token operator">:</span> <span class="token string">&quot;商品&quot;</span><span class="token punctuation">,</span>
                    age<span class="token operator">:</span> <span class="token number">2323</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> userApis

<span class="token comment">// 测试脚本: /mock/UserMock.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>MockMethod<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite-plugin-mock&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userApis<span class="token operator">:</span>MockMethod<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">'/mock/user'</span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">response</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">{</span>
                code<span class="token operator">:</span> <span class="token number">200200</span><span class="token punctuation">,</span>
                msg<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
                data<span class="token operator">:</span> <span class="token punctuation">{</span>
                    name<span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
                    age<span class="token operator">:</span> <span class="token number">23</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> userApis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div></li> <li><p>编写API测试方法</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>ResponseData<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/types/common/ResponseData&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>httpClient<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/utils/HttpClient&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UserRequest</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getUser</span><span class="token punctuation">(</span>name<span class="token operator">:</span> UserRequest<span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span>ResponseData<span class="token operator">&lt;</span>User<span class="token operator">&gt;&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getProduct</span><span class="token punctuation">(</span>name<span class="token operator">:</span> UserRequest<span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span>ResponseData<span class="token operator">&lt;</span>User<span class="token operator">&gt;&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/product&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p>测试请求发送</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>getProduct<span class="token punctuation">,</span> getUser<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/api/MockApi&quot;</span><span class="token punctuation">;</span>
<span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&quot;战三&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">getProduct</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&quot;战三&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul> <h3 id="_6-集成router4"><a href="#_6-集成router4" class="header-anchor">#</a> 6. 集成router4</h3> <ul><li><p>安装Router4</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">install</span> vue-router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>添加Router配置文件</p> <ol><li><p>在src中新增<code>router</code>目录，添加index.ts配置文件，并添加404页面<code>/:catchAll(.*)</code>，<strong>注</strong>：该path配置不需要添加name值；</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory<span class="token punctuation">,</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">const</span> routes<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/:catchAll(.*)'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/error/index.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">as</span> RouteRecordRaw
<span class="token punctuation">]</span>
<span class="token keyword">const</span> routerModules<span class="token operator">:</span>Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">&quot;./modules/*.ts&quot;</span><span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>routerModules<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>key<span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    routes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>routerModules<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>default<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p>再到router目录中新增modules目录，所有路由定义在该目录中，如添加测试配置：hello.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>RouteRecordRaw<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hello<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'Root'</span><span class="token punctuation">,</span>
        redirect<span class="token operator">:</span><span class="token string">'/hello'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/hello'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'Hello'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/HelloWorld.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span> <span class="token punctuation">{</span>
            msg<span class="token operator">:</span> <span class="token string">'路由参数'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ol></li> <li><p>配置main.ts，集成Router4</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;@/router&quot;</span><span class="token punctuation">;</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>测试修改：App.vue中删除HelloWorld.vue组件，并添加路由配置</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>HelloWorld<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>配置Router动态路由</p> <ol><li><p>首先前端需要定义需要配的路由组件：如下，提前将需要动态匹配的组件定义在一个集合中，或者使用Vite的<code>import.meta.globEager(&quot;*.vue&quot;)</code>加载出指定目录中所有的Vue组件；</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'Test'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/TestRouter.vue'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>MockJS添加路由接口</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code></code></pre> <div class="line-numbers-wrapper"></div></div></li> <li><p>定义API接口发送请求获取路由</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code></code></pre> <div class="line-numbers-wrapper"></div></div></li> <li><p>动态路由配置：如下是案例代码</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// 定义从接口返回的数据类型</span>
<span class="token keyword">interface</span> <span class="token class-name">Menu</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 距离从接口返回的菜单集合</span>
<span class="token keyword">const</span>  ms<span class="token operator">:</span> Menu<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/test'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'Test'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token string">'Test'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment">// 定义一个方法将菜单集合转换为路由集合</span>
<span class="token keyword">function</span> <span class="token function">buildRouter</span><span class="token punctuation">(</span>menus<span class="token operator">:</span> Menu<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> rs<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> menu <span class="token keyword">of</span> menus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token punctuation">{</span>
            path<span class="token operator">:</span> menu<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
            name<span class="token operator">:</span> menu<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
            component<span class="token operator">:</span>  map<span class="token punctuation">[</span>menu<span class="token punctuation">.</span>component<span class="token punctuation">]</span>
        <span class="token punctuation">}</span> <span class="token keyword">as</span>  RouteRecordRaw<span class="token punctuation">;</span>
        rs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> rs<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在路由导航中判断是否存在路由，如果不存在则动态添加，如果添加失败会跳转404错误页面</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">hasRoute</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> dynamicRouters <span class="token operator">=</span> <span class="token function">buildRouter</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
        dynamicRouters<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> dr <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span>ds<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>to<span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div></li></ol></li></ul> <h3 id="_7-集成sass"><a href="#_7-集成sass" class="header-anchor">#</a> 7. 集成Sass</h3> <ul><li><p>安装sass依赖</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">install</span> --save-dev sass <span class="token function">less</span> less-loader
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>新建测试文件：``/src/assert/scss/index.scss<code>和</code>_base.scss`</p> <ul><li><p>index.scss</p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token keyword">@import</span> <span class="token string">&quot;base&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>_base.scss</p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token property"><span class="token variable">$baseColor</span></span><span class="token punctuation">:</span> #eeaa11<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>配置文件vite.config.ts中添加css配置</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    css<span class="token operator">:</span><span class="token punctuation">{</span>
        preprocessorOptions<span class="token operator">:</span><span class="token punctuation">{</span>
            scss<span class="token operator">:</span><span class="token punctuation">{</span>
                javascriptEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                additionalData<span class="token operator">:</span> <span class="token string">'@import &quot;@/assets/scss/index.scss&quot;;'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>测试在HelloWorld.vue中使用样式</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">a</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> $baseColor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h3 id="_8-icon组件封装"><a href="#_8-icon组件封装" class="header-anchor">#</a> 8. Icon组件封装</h3> <ul><li></li></ul></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/05/15, 16:14:29</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/note_blogs_vuepress_web/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/note_blogs_vuepress_web/pages/f67036/"><div>
            Provider
            <!----></div></a> <span class="date">05-14</span></dt></dl><dl><dd>02</dd> <dt><a href="/note_blogs_vuepress_web/pages/323f08/"><div>
            自定义组件
            <!----></div></a> <span class="date">05-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/note_blogs_vuepress_web/pages/932ba4/"><div>
            表单组件
            <!----></div></a> <span class="date">05-14</span></dt></dl> <dl><dd></dd> <dt><a href="/note_blogs_vuepress_web/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://space.bilibili.com/205014127" title="哔哩哔哩" target="_blank" class="iconfont icon-bilibili"></a><a href="https://gitee.com/xiaoliuxuesheng" title="GitEE" target="_blank" class="iconfont icon-gitee"></a><a href="https://github.com/xiaoliuxuesheng" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=2916766519" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/note_blogs_vuepress_web/assets/js/app.4ea283e3.js" defer></script><script src="/note_blogs_vuepress_web/assets/js/2.ceef22bc.js" defer></script><script src="/note_blogs_vuepress_web/assets/js/52.f4a61621.js" defer></script>
  </body>
</html>
