<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第一章 ViteTs项目搭建 | xiaoliuxuesheng</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/note_blogs_vuepress_web/img/favicon.ico">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/note_blogs_vuepress_web/assets/css/0.styles.9a0b7a11.css" as="style"><link rel="preload" href="/note_blogs_vuepress_web/assets/js/app.00b3e9fa.js" as="script"><link rel="preload" href="/note_blogs_vuepress_web/assets/js/2.ceef22bc.js" as="script"><link rel="preload" href="/note_blogs_vuepress_web/assets/js/80.e1af4f09.js" as="script"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/10.cb0c7815.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/100.e4d1ae8a.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/101.0b479df0.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/102.010f93b5.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/11.6e55625a.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/12.df1e9dd7.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/13.20faff70.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/14.3b209326.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/15.6dd34a32.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/16.a04f3539.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/17.13e2fe09.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/18.235acb21.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/19.fdd3a3c9.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/20.4fc71db2.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/21.4e5e9e51.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/22.50900dab.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/23.8426bd62.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/24.275292f4.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/25.0ee481c5.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/26.1453cf8c.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/27.0d156e2b.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/28.06200f5f.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/29.4f6c70b9.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/3.0701648f.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/30.005b8e23.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/31.9bbc5f0c.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/32.7aed3bbe.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/33.0ea92e31.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/34.4a62e138.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/35.e6db6c54.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/36.4fec364c.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/37.b972934d.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/38.07756d5c.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/39.8a40e128.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/4.94dce7a4.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/40.528fe972.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/41.5a43e2fa.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/42.cf437274.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/43.1f5474ad.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/44.4494e358.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/45.6fcb5614.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/46.741ddba5.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/47.c0acfd04.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/48.9a4b4263.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/49.71cf22f6.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/5.c116b26f.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/50.b87c5338.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/51.c68eaa4e.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/52.a343373c.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/53.fbcc7b13.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/54.0d9f00c4.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/55.89994156.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/56.06595eb3.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/57.4efb65d6.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/58.0c8a4522.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/59.42b928f7.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/6.35aba0bf.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/60.03c78210.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/61.d8d0d21b.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/62.fa47484a.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/63.7c1d12d1.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/64.3b756f09.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/65.18f3274c.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/66.e4310a74.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/67.35667cea.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/68.8e69c17a.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/69.986395bd.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/7.d8929e0d.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/70.2872ffc9.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/71.19beb1fc.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/72.cb471297.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/73.bcd0c228.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/74.50181cc4.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/75.3c74e975.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/76.fa156193.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/77.087ffca6.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/78.e9aed4aa.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/79.09ed4a60.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/8.bfe0e66a.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/81.f7664f1f.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/82.e9d0302b.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/83.5b20cc0f.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/84.bd9cc2e1.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/85.ce4346ff.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/86.dd4adf91.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/87.69b32e7c.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/88.580ff464.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/89.9adcc492.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/9.f8141f29.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/90.67c44b38.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/91.fb781f19.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/92.de3fd367.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/93.014a0d29.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/94.f0f39402.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/95.2174b23a.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/96.636ef71a.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/97.a8871a33.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/98.5b1cc9cf.js"><link rel="prefetch" href="/note_blogs_vuepress_web/assets/js/99.3bb5edaa.js">
    <link rel="stylesheet" href="/note_blogs_vuepress_web/assets/css/0.styles.9a0b7a11.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu only-sidebarItem"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note_blogs_vuepress_web/" class="home-link router-link-active"><img src="/note_blogs_vuepress_web/img/logo.png" alt="xiaoliuxuesheng" class="logo"> <span class="site-name can-hide">xiaoliuxuesheng</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note_blogs_vuepress_web/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/note_blogs_vuepress_web/webBase/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/570813/" class="nav-link">01.HTML</a></li><li class="dropdown-item"><h4>02.CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/base/" class="nav-link">CSS基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/select/" class="nav-link">CSS选择器</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/attr/" class="nav-link">CSS常用属性</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/layout/" class="nav-link">CSS布局</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/new/" class="nav-link">CSS新特性</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/7c78a1/" class="nav-link">03.JavaScript</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/c73bb2/" class="nav-link">04.Dart</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><a href="/note_blogs_vuepress_web/webHight/" class="link-title">前端进阶</a> <span class="title" style="display:none;">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/c96fd9/" class="nav-link">05.TypeScript</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/c30c6b/" class="nav-link">06.CSS案例</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><a href="/note_blogs_vuepress_web/webFw/" class="link-title">前端框架</a> <span class="title" style="display:none;">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>01.Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/base/" class="nav-link">Vue基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/home/" class="nav-link">Vue进阶</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/project/" class="nav-link">Vue项目搭建</a></li></ul></li><li class="dropdown-item"><h4>03.Flutter</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/base/" class="nav-link">Flutter基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/wedget/" class="nav-link">Flutter组件</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/third/" class="nav-link">Flutter第三方组件</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/hight/" class="nav-link">Flutter高级</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/note_blogs_vuepress_web/webLib/" class="nav-link">前端库</a></div><div class="nav-item"><a href="/note_blogs_vuepress_web/#" class="nav-link">|</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/note_blogs_vuepress_web/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/note_blogs_vuepress_web/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/note_blogs_vuepress_web/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/note_blogs_vuepress_web/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://s1.ax1x.com/2023/03/18/ppJs44s.png"> <div class="blogger-info"><h3>小刘学生</h3> <span>土木工程毕业的程序员</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/note_blogs_vuepress_web/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/note_blogs_vuepress_web/webBase/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/570813/" class="nav-link">01.HTML</a></li><li class="dropdown-item"><h4>02.CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/base/" class="nav-link">CSS基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/select/" class="nav-link">CSS选择器</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/attr/" class="nav-link">CSS常用属性</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/layout/" class="nav-link">CSS布局</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/css/new/" class="nav-link">CSS新特性</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/7c78a1/" class="nav-link">03.JavaScript</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/c73bb2/" class="nav-link">04.Dart</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><a href="/note_blogs_vuepress_web/webHight/" class="link-title">前端进阶</a> <span class="title" style="display:none;">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/c96fd9/" class="nav-link">05.TypeScript</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/c30c6b/" class="nav-link">06.CSS案例</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><a href="/note_blogs_vuepress_web/webFw/" class="link-title">前端框架</a> <span class="title" style="display:none;">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>01.Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/base/" class="nav-link">Vue基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/home/" class="nav-link">Vue进阶</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/vue/project/" class="nav-link">Vue项目搭建</a></li></ul></li><li class="dropdown-item"><h4>03.Flutter</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/base/" class="nav-link">Flutter基础</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/wedget/" class="nav-link">Flutter组件</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/third/" class="nav-link">Flutter第三方组件</a></li><li class="dropdown-subitem"><a href="/note_blogs_vuepress_web/flutter/hight/" class="nav-link">Flutter高级</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/note_blogs_vuepress_web/webLib/" class="nav-link">前端库</a></div><div class="nav-item"><a href="/note_blogs_vuepress_web/#" class="nav-link">|</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/note_blogs_vuepress_web/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/note_blogs_vuepress_web/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/note_blogs_vuepress_web/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/note_blogs_vuepress_web/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/note_blogs_vuepress_web/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/note_blogs_vuepress_web/pages/57ef7d/" aria-current="page" class="active sidebar-link">第一章 ViteTs项目搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-1-环境信息" class="sidebar-link">1.1 环境信息</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-2-vue项目搭建" class="sidebar-link">1.2 Vue项目搭建</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-3-项目配置-eslint" class="sidebar-link">1.3 项目配置-Eslint</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-4-配置prettier并集成eslint" class="sidebar-link">1.4 配置prettier并集成Eslint</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-5-启动端口配置" class="sidebar-link">1.5 启动端口配置</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-6-设置路径别名" class="sidebar-link">1.6 设置路径别名</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-7-添加环境配置文件" class="sidebar-link">1.7 添加环境配置文件</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-8-集成scss" class="sidebar-link">1.8 集成SCSS</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-9-icon组件封装" class="sidebar-link">1.9 Icon组件封装</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-10-集成axios" class="sidebar-link">1.10 集成Axios</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-11-集成mockjs" class="sidebar-link">1.11 集成MockJS</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-12-集成pinia" class="sidebar-link">1.12 集成Pinia</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-13-集成router" class="sidebar-link">1.13 集成Router</a></li><li class="sidebar-sub-header level2"><a href="/note_blogs_vuepress_web/pages/57ef7d/#_1-14-集成elementplus" class="sidebar-link">1.14 集成ElementPlus</a></li></ul></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/note_blogs_vuepress_web/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/note_blogs_vuepress_web/vue/project/#Vue项目搭建" data-v-06225672>Vue项目搭建</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://gitee.com/xiaoliuxuesheng" target="_blank" title="作者" class="beLink" data-v-06225672>xiaoliuxuesheng</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-01-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">第一章 ViteTs项目搭建<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="_1-1-环境信息"><a href="#_1-1-环境信息" class="header-anchor">#</a> 1.1 环境信息</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ nvm <span class="token parameter variable">-v</span>
<span class="token number">1.1</span>.10

nrm <span class="token function">ls</span>
  <span class="token function">npm</span> ---------- https://registry.npmjs.org/
  <span class="token function">yarn</span> --------- https://registry.yarnpkg.com/
* tencent ------ https://mirrors.cloud.tencent.com/npm/
  cnpm --------- https://r.cnpmjs.org/
  taobao ------- https://registry.npmmirror.com/
  npmMirror ---- https://skimdb.npmjs.com/registry/

$ <span class="token function">node</span> <span class="token parameter variable">-v</span>
v16.18.1

$ <span class="token function">pnpm</span> <span class="token parameter variable">-v</span>
<span class="token number">7.30</span>.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_1-2-vue项目搭建"><a href="#_1-2-vue项目搭建" class="header-anchor">#</a> 1.2 Vue项目搭建</h2> <ul><li><p>使用pnpm工具构建基于Vite的Vue项目</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ <span class="token function">pnpm</span> create vite
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 定义项目名称：项目根目录名称</span>
√ Project name: <span class="token punctuation">..</span>. demo03-vite-vue

<span class="token comment"># 选择项目使用的框架</span>
? Select a framework: » - Use arrow-keys. Return to submit.
    Vanilla
<span class="token operator">&gt;</span>   Vue
    React
    Preact
    Lit
    Svelte
    Others
    
<span class="token comment"># 选择框架的语言</span>
? Select a variant: » - Use arrow-keys. Return to submit.
<span class="token operator">&gt;</span>   TypeScript
    JavaScript
    Customize with create-vue ↗
    Nuxt ↗
    
<span class="token comment"># 创建成功</span>
Done. Now run:

  <span class="token builtin class-name">cd</span> demo03-vite-vue
  <span class="token function">pnpm</span> <span class="token function">install</span>
  <span class="token function">pnpm</span> run dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></blockquote></li></ul> <h2 id="_1-3-项目配置-eslint"><a href="#_1-3-项目配置-eslint" class="header-anchor">#</a> 1.3 项目配置-Eslint</h2> <ul><li><p>下载Eslint源码包</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">add</span> eslint <span class="token parameter variable">-D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>使用Eslint初始化命令构建eslint的配置文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> create @eslint/config
<span class="token comment"># 或者使用旧版本命</span>
<span class="token function">pnpm</span> eslint <span class="token parameter variable">--init</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 选择Eslint的使用方式：①只检查、②检查并定位、③检查定位并且规定代码风格</span>
? How would you like to use ESLint? <span class="token punctuation">..</span>.
  To check syntax only
  To check syntax and <span class="token function">find</span> problems
<span class="token operator">&gt;</span> To check syntax, <span class="token function">find</span> problems, and enforce code style

<span class="token comment"># 项目中使用ES的模块应用方式</span>
? What <span class="token builtin class-name">type</span> of modules does your project use? <span class="token punctuation">..</span>.
<span class="token operator">&gt;</span> JavaScript modules <span class="token punctuation">(</span>import/export<span class="token punctuation">)</span>
  CommonJS <span class="token punctuation">(</span>require/exports<span class="token punctuation">)</span>
  None of these
  
<span class="token comment"># 在Vue框架中使用Eslint</span>
? Which framework does your project use? <span class="token punctuation">..</span>.
  React
<span class="token operator">&gt;</span> Vue.js
  None of these
  
<span class="token comment"># YES：Vue项目中使用TS</span>
? Does your project use TypeScript? » No / Yes

<span class="token comment"># 运行环境：选择浏览器</span>
? Where does your code run? <span class="token punctuation">..</span>.  <span class="token punctuation">(</span>Press <span class="token operator">&lt;</span>space<span class="token operator">&gt;</span> to select, <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span> to toggle all, <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> to invert selection<span class="token punctuation">)</span>
√ Browser
√ Node

<span class="token comment"># Eslint风格：使用流行的</span>
? How would you like to define a style <span class="token keyword">for</span> your project? <span class="token punctuation">..</span>.
<span class="token operator">&gt;</span> Use a popular style guide
  Answer questions about your style
  
<span class="token comment"># 使用标准的规则指导</span>
? Which style guide <span class="token keyword">do</span> you want to follow? <span class="token punctuation">..</span>.
<span class="token operator">&gt;</span> Standard: https://github.com/standard/eslint-config-standard-with-typescript
  XO: https://github.com/xojs/eslint-config-xo-typescript

<span class="token comment"># 生成的配置文件格式</span>
? What <span class="token function">format</span> <span class="token keyword">do</span> you want your config <span class="token function">file</span> to be in? <span class="token punctuation">..</span>.
<span class="token operator">&gt;</span> JavaScript
  YAML
  JSON
  
<span class="token comment"># 根据如上各种选项：安装必须的依赖</span>
eslint-plugin-vue@latest eslint-config-standard-with-typescript@latest @typescript-eslint/eslint-plugin@^5.43.0 eslint@^8.0.1 eslint-plugin-import@^2.25.2 eslint-plugin-n@^15.0.0 eslint-plugin-promise@^6.0.0 typescript@*
? Would you like to <span class="token function">install</span> them now? » No / Yes

<span class="token comment"># 安装依赖的包管理方式</span>
? Which package manager <span class="token keyword">do</span> you want to use? <span class="token punctuation">..</span>.
  <span class="token function">npm</span>
  <span class="token function">yarn</span>
<span class="token operator">&gt;</span> <span class="token function">pnpm</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div></blockquote></li> <li><p>项目根目录生成Eslint配置文件：<code>.eslintrc.cjs</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">es2021</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'plugin:vue/vue3-essential'</span><span class="token punctuation">,</span>
        <span class="token string">'standard-with-typescript'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">overrides</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">'latest'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">'module'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'vue'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li> <li><p>Eslint环境启动脚本配置：在<code>package.json</code>文件中添加lint启动项</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint . --ext .vue,.js,.ts,.jsx,.tsx --fix&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>执行命令：pnpm lint</p> <ul><li><p><strong>问题一（parserOptions.project）</strong>：查看检查结果，查看执行报错信息</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Error: Error <span class="token keyword">while</span> loading rule <span class="token string">'@typescript-eslint/dot-notation'</span><span class="token builtin class-name">:</span> 
You have used a rule <span class="token function">which</span> requires parserServices to be generated. 
You must therefore provide a value <span class="token keyword">for</span> the <span class="token string">&quot;parserOptions.project&quot;</span> property 
<span class="token keyword">for</span> @typescript-eslint/parser.
Occurred <span class="token keyword">while</span> linting E:<span class="token punctuation">\</span>AdminCode<span class="token punctuation">\</span>business_alliances<span class="token punctuation">\</span>demo03-vite-vue<span class="token punctuation">\</span>src<span class="token punctuation">\</span>main.ts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>问题一修改（parserOptions.project）：在Eslint配置文件中指定typepscript的配置文件位置</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 默认是当前目录，可以不用添加</span>
    tsconfigRootDir<span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 从当前目录读取的ts配置文件路径</span>
    project<span class="token operator">:</span> <span class="token string">&quot;./tsconfig.json&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><strong>问题二</strong>：再次执行pnpm lint，查看新问题</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>XXX<span class="token punctuation">\</span>src<span class="token punctuation">\</span>components<span class="token punctuation">\</span>HelloWorld.vue
  <span class="token number">4</span>:29  error  Parsing error: Unexpected token <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>问题二修改：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 下载Eslint的TS解析器</span>
<span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> @typescript-eslint/parser

<span class="token comment"># 在Eslint配置文件中添加parserOptions.parse配置</span>
parserOptions: <span class="token punctuation">{</span>
	parser: <span class="token string">&quot;@typescript-eslint/parser&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p><strong>问题三</strong>：再次执行pnpm lint，查看新问题</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Parsing error: ESLint was configured to run on <span class="token variable"><span class="token variable">`</span><span class="token operator">&lt;</span>tsconfigRootDir<span class="token operator">&gt;</span>/src<span class="token punctuation">\</span>App.vue<span class="token variable">`</span></span> using <span class="token variable"><span class="token variable">`</span>parserOptions.project<span class="token variable">`</span></span><span class="token builtin class-name">:</span> 
<span class="token operator">&lt;</span>tsconfigRootDir<span class="token operator">&gt;</span>/tsconfig.json
The extension <span class="token keyword">for</span> the <span class="token function">file</span> <span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span>.vue<span class="token variable">`</span></span><span class="token punctuation">)</span> is non-standard. 
You should <span class="token function">add</span> <span class="token variable"><span class="token variable">`</span>parserOptions.extraFileExtensions<span class="token variable">`</span></span> to your config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>问题三修改：根据错误提示，在Eslint配置文件中的parserOptions配置中添加extraFileExtensions属性</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
	extraFileExtensions<span class="token operator">:</span> <span class="token punctuation">[</span>'.vue'<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></blockquote></li> <li><p>Eslint集成Vite项目</p> <ul><li><p>下载Eslint的vite插件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vite-plugin-eslint
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>在Vite配置文件中添加插件</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> eslintPlugin <span class="token keyword">from</span> <span class="token string">'vite-plugin-eslint'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">eslintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      include<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'src/**/*.ts'</span><span class="token punctuation">,</span> <span class="token string">'src/**/*.vue'</span><span class="token punctuation">,</span> <span class="token string">'src/*.ts'</span><span class="token punctuation">,</span> <span class="token string">'src/*.vue'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>启动项目<code>pnpm dev</code>：在浏览器中提示修改代码中格式问题</p></li></ul></li></ul> <h2 id="_1-4-配置prettier并集成eslint"><a href="#_1-4-配置prettier并集成eslint" class="header-anchor">#</a> 1.4 配置prettier并集成Eslint</h2> <ol><li><p>下载prettier相关依赖</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> prettier eslint-config-prettier eslint-plugin-prettier
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><ul><li>prettier：prettier插件的核心代码</li> <li>eslint-config-prettier：解决ESLint中的样式规范和prettier中样式规范的冲突，以prettier的样式规范为准，使ESLint中的样式规范自动失效</li> <li>eslint-plugin-prettier：将prettier作为ESLint规范来使用</li></ul></blockquote></li> <li><p>在项目根目录添加prettier配置文件：<code>.prettierrc.cjs</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    // 一行最多 <span class="token number">100</span> 字符
    printWidth: <span class="token number">100</span>,
    // 不使用缩进符，而使用空格
    useTabs: false,
    // 使用 <span class="token number">4</span> 个空格缩进
    tabWidth: <span class="token number">4</span>,
    tabSize: <span class="token number">4</span>,
    // 行尾需要有分号
    semi: false,
    // 使用单引号
    singleQuote: true,
    // 对象的 key 仅在必要时用引号
    quoteProps: <span class="token string">'as-needed'</span>,
    // jsx 不使用单引号，而使用双引号
    jsxSingleQuote: false,
    // 末尾不需要逗号 <span class="token string">'es5'</span>  none
    trailingComma: <span class="token string">'es5'</span>,
    // 大括号内的首尾需要空格
    bracketSpacing: true,
    // jsx 标签的反尖括号需要换行
    jsxBracketSameLine: false,
    // 箭头函数，只有一个参数的时候，也需要括号
    arrowParens: <span class="token string">'always'</span>,
    // 每个文件格式化的范围是文件的全部内容
    rangeStart: <span class="token number">0</span>,
    rangeEnd: Infinity,
    // 不需要写文件开头的 @prettier
    requirePragma: false,
    // 不需要自动在文件开头插入 @prettier
    insertPragma: false,
    // 使用默认的折行标准
    proseWrap: <span class="token string">'preserve'</span>,
    // 根据显示样式决定 html 要不要折行
    htmlWhitespaceSensitivity: <span class="token string">'css'</span>,
    // 换行符使用 lf 结尾是 <span class="token punctuation">\</span>n <span class="token punctuation">\</span>r <span class="token punctuation">\</span>n<span class="token punctuation">\</span>r auto
    endOfLine: <span class="token string">'lf'</span>,
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></li> <li><p>集成Eslint：添加格式化配置文件之后，需要集成Eslin，将Eslint的检查规则交个格式化方式</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>module.exports = <span class="token punctuation">{</span>
  extends<span class="token operator">:</span> <span class="token punctuation">[</span>
    'plugin<span class="token operator">:</span>vue/vue3-essential'<span class="token punctuation">,</span>
    <span class="token comment">// 集成Eslint检查规则</span>
    'prettier'<span class="token punctuation">,</span>
    'plugin<span class="token operator">:</span>prettier/recommended'
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>设置编辑器格式化文件快捷键</p> <ul><li>WebStom：File | Settings | Keymap | Plugins | Prettier | Reformat with Prettier</li> <li>VsCode：</li></ul></li> <li><p>启动项目<code>pnpm dev</code>：在浏览器中提示修改代码中格式问题</p></li></ol> <h2 id="_1-5-启动端口配置"><a href="#_1-5-启动端口配置" class="header-anchor">#</a> 1.5 启动端口配置</h2> <ul><li><p>修改配置文件：vite.config.ts中新增<code>server</code>配置项</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    server<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 是否自动打开浏览器</span>
        open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 服务器主机名，如果允许外部访问，可设置为&quot;0.0.0.0&quot;</span>
        host<span class="token operator">:</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span>
        <span class="token comment">// 服务器端口号</span>
        port<span class="token operator">:</span> <span class="token number">8090</span><span class="token punctuation">,</span>
        <span class="token comment">// 设为 true ,若端口已被占用则会直接退出，而不是尝试下一个可用端口</span>
        strictPort<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token comment">// 为开发服务器配置 CORS</span>
        cors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置为 true 强制使依赖预构建</span>
        force<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>启动：pnpm run dev</p> <p>Port 8090 is in use, trying another one...</p> <p>VITE v4.3.2  ready in 307 ms</p> <p>➜  Local:   http://localhost:8091/<br>
➜  Network: http://192.168.132.1:8091/
➜  Network: http://192.168.10.1:8091/
➜  Network: http://192.168.0.106:8091/</p></blockquote></li></ul> <h2 id="_1-6-设置路径别名"><a href="#_1-6-设置路径别名" class="header-anchor">#</a> 1.6 设置路径别名</h2> <ol><li><p>安装路径解析依赖包</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> i @types/node <span class="token parameter variable">-D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>配置文件中添加别名配置项：vite.config.ts中的resolve\</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// 路径解析器</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>resolve<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'path'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
      alias<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'@'</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.ts'</span><span class="token punctuation">,</span> <span class="token string">'.vue'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">,</span> <span class="token string">'.scss'</span><span class="token punctuation">,</span> <span class="token string">'.css'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>在tsconfig.json配置中添加路径解析配置</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用于设置解析非相对模块名称的基本目录，相对模块不会受到baseUrl的影响</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 用于设置模块名到基于baseUrl的路径映射</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>测试别名：修改App.vue中的HelloWorld的import</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">'@/components/HelloWorld'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h2 id="_1-7-添加环境配置文件"><a href="#_1-7-添加环境配置文件" class="header-anchor">#</a> 1.7 添加环境配置文件</h2> <ol><li><p>在项目根目录定义配置文件：<code>.evn.环境标识</code></p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>.env.mock
.env.dev
.env.test
.dev.prod
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>添加测定配置内容：配置文件中属性必须是<code>VITE_</code>开头</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">VITE_MODE_NAME</span><span class="token punctuation">=</span><span class="token value attr-value">mock</span>
<span class="token key attr-name">VITE_BASE_URL</span><span class="token punctuation">=</span><span class="token value attr-value">http://localhost:9002/mock/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>package.json新增启动script，指定启动环境</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;mock&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite  --mode mock&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite  --mode dev&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite  --mode test&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;prod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite  --mode prod&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>读取配置文件中配置信息</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> env <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_BASE_URL</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>启动vite项目，查看控制台打印信息</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> mock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h2 id="_1-8-集成scss"><a href="#_1-8-集成scss" class="header-anchor">#</a> 1.8 集成SCSS</h2> <ol><li><p>安装sass依赖</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">install</span> --save-dev sass <span class="token function">less</span> less-loader
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>新建测试文件：``/src/assert/scss/index.scss<code>和</code>_base.scss`</p> <ul><li><p>index.scss</p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token keyword">@import</span> <span class="token string">&quot;base&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>_base.scss</p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token property"><span class="token variable">$baseColor</span></span><span class="token punctuation">:</span> #eeaa11<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>配置文件vite.config.ts中添加css配置</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    css<span class="token operator">:</span><span class="token punctuation">{</span>
        preprocessorOptions<span class="token operator">:</span><span class="token punctuation">{</span>
            scss<span class="token operator">:</span><span class="token punctuation">{</span>
                javascriptEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                additionalData<span class="token operator">:</span> <span class="token string">'@import &quot;@/assets/scss/index.scss&quot;;'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>测试在HelloWorld.vue中使用样式</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">a</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> $baseColor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <h2 id="_1-9-icon组件封装"><a href="#_1-9-icon组件封装" class="header-anchor">#</a> 1.9 Icon组件封装</h2> <ol><li><p>下载Vite的Icon插件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vite-plugin-svg-icons
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>在Vite项目的配置文件<code>vite.config.ts</code>中配置插件</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createSvgIconsPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite-plugin-svg-icons'</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">createSvgIconsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            iconDirs<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/assets/svg/'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            symbolId<span class="token operator">:</span> <span class="token string">'icon-[name]'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>新建目录：<code>src/assets/svg/</code>和配置文件中保持一致</p></li> <li><p>在svg目录下添加Icon文件，文件结构如下</p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>src/assets/svg/
	/down
		ljt.svg
        pat.svg
        record.svg
    vue.svg
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>定义<code>SvgIcon.vue</code>组件：如组件位置：<code>@/components/common/SvgIcon.vue</code></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>svgClass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>use</span> <span class="token attr-name">:xlink:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> defineProps<span class="token punctuation">,</span> withDefaults <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string
    color<span class="token operator">?</span><span class="token operator">:</span> string
    size<span class="token operator">?</span><span class="token operator">:</span> string
<span class="token punctuation">}</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span>defineProps<span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#000'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">'16px'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> iconName <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">#icon-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token keyword">const</span> svgClass <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">svg-icon </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">'svg-icon'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
$<span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">v-bind</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
$<span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">v-bind</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token selector">.svg-icon</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> $width<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> $height<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">fill</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></li> <li><p>在<code>main.ts</code>中将<code>SvgIcon.vue</code>组件进行全局注册</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token string">'virtual:svg-icons-register'</span>
<span class="token keyword">import</span> SvgIcon <span class="token keyword">from</span> <span class="token string">'@/components/common/SvgIcon.vue'</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'svg-icon'</span><span class="token punctuation">,</span> SvgIcon<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>测试组件的使用</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vue<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>down/pat<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2em<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>down/record<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>down/ljt<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>black<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3em<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <h2 id="_1-10-集成axios"><a href="#_1-10-集成axios" class="header-anchor">#</a> 1.10 集成Axios</h2> <blockquote><p>axios官网：https://www.axios-http.cn/</p> <p>Github地址：https://github.com/axios/axios</p></blockquote> <ol><li><p>下载Axios</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">--save</span> axios
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>相关文件目录结构</p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>/src/types
    │- index.ts
    └─/common
            InterceptorHook.ts
            InterceptorRequestConfig.ts
            RequestConfig.ts
            RequestOptions.ts
            ResponseConfig.ts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><p>InterceptorHook.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> InternalAxiosRequestConfig<span class="token punctuation">,</span> AxiosResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">interface</span> <span class="token class-name">InterceptorHook</span> <span class="token punctuation">{</span>
    requestInterceptor<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>config<span class="token operator">:</span> InternalAxiosRequestConfig<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> InternalAxiosRequestConfig
    requestInterceptorCatch<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span>
    responseInterceptor<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>response<span class="token operator">:</span> AxiosResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> AxiosResponse <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>AxiosResponse<span class="token operator">&gt;</span>
    responseInterceptorCatch<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>InterceptorRequestConfig.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">InterceptorHook</span> <span class="token keyword">from</span> <span class="token string">'./InterceptorHook.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">RequestOptions</span> <span class="token keyword">from</span> <span class="token string">'./RequestOptions.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> InternalAxiosRequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">interface</span> <span class="token class-name">InterceptorRequestConfig<span class="token operator">&lt;</span><span class="token constant">D</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">InternalAxiosRequestConfig<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    interceptorHooks<span class="token operator">?</span><span class="token operator">:</span> InterceptorHook
    requestOptions<span class="token operator">?</span><span class="token operator">:</span> RequestOptions
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>RequestConfig.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">InterceptorHook</span> <span class="token keyword">from</span> <span class="token string">'./InterceptorHook.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">RequestOptions</span> <span class="token keyword">from</span> <span class="token string">'./RequestOptions.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> AxiosRequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">interface</span> <span class="token class-name">RequestConfig<span class="token operator">&lt;</span><span class="token constant">D</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AxiosRequestConfig<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    interceptorHooks<span class="token operator">?</span><span class="token operator">:</span> InterceptorHook
    requestOptions<span class="token operator">?</span><span class="token operator">:</span> RequestOptions
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>RequestOptions.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">interface</span> <span class="token class-name">RequestOptions</span> <span class="token punctuation">{</span>
    <span class="token comment">// 是否全局展示请求 错误信息</span>
    globalErrorMessage<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
    <span class="token comment">// 是否全局展示请求 成功信息</span>
    globalSuccessMessage<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>ResponseConfig.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> AxiosResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">InterceptorRequestConfig</span> <span class="token keyword">from</span> <span class="token string">'./InterceptorRequestConfig.ts'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">interface</span> <span class="token class-name">ResponseConfig<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">D</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AxiosResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">D</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    config<span class="token operator">:</span> InterceptorRequestConfig<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>index.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">InterceptorHook</span> <span class="token keyword">from</span> <span class="token string">'./common/InterceptorHook.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">InterceptorRequestConfig</span> <span class="token keyword">from</span> <span class="token string">'./common/InterceptorRequestConfig.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">RequestConfig</span> <span class="token keyword">from</span> <span class="token string">'./common/RequestConfig.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">RequestOptions</span> <span class="token keyword">from</span> <span class="token string">'./common/RequestOptions.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">ResponseConfig</span> <span class="token keyword">from</span> <span class="token string">'./common/ResponseConfig.ts'</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>
    InterceptorHook<span class="token punctuation">,</span>
    InterceptorRequestConfig<span class="token punctuation">,</span>
    RequestConfig<span class="token punctuation">,</span>
    RequestOptions<span class="token punctuation">,</span>
    ResponseConfig<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul></li> <li><p>封装Axios：util/AxiosInstence.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> AxiosInstance<span class="token punctuation">,</span> AxiosResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> InterceptorHook<span class="token punctuation">,</span> RequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/types/index.ts'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Request</span> <span class="token punctuation">{</span>
    <span class="token comment">// axios 实例</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> _instance<span class="token operator">:</span> AxiosInstance
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> _interceptorHooks<span class="token operator">?</span><span class="token operator">:</span> InterceptorHook
    <span class="token comment">// 默认配置</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> _defaultConfig<span class="token operator">:</span> RequestConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
        baseURL<span class="token operator">:</span> <span class="token string">'/api'</span><span class="token punctuation">,</span>
        timeout<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
        requestOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            globalErrorMessage<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            globalSuccessMessage<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        headers<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>config<span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用axios.create创建axios实例</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_defaultConfig<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_interceptorHooks <span class="token operator">=</span> config<span class="token punctuation">.</span>interceptorHooks
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setupInterceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 通用拦截，在初始化时就进行注册和运行，对基础属性进行处理</span>
    <span class="token keyword">private</span> <span class="token function">setupInterceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_interceptorHooks<span class="token operator">?.</span>requestInterceptor<span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_interceptorHooks<span class="token operator">?.</span>requestInterceptorCatch
        <span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_interceptorHooks<span class="token operator">?.</span>responseInterceptor<span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_interceptorHooks<span class="token operator">?.</span>responseInterceptorCatch
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 定义核心请求</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">request</span><span class="token punctuation">(</span>config<span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>AxiosResponse<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ！！！?? 注意：axios 已经将请求使用 promise 封装过了</span>
        <span class="token comment">// 这里直接返回，不需要我们再使用 promise 封装一层</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token generic-function"><span class="token function">put</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token keyword">delete</span><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> RequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_instance<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><blockquote><p>扩展请求参数，自定义请求参数类型：如下加入消息提示的配置</p> <p>新版本Axios的请求的config类型：InternalAxiosRequestConfig，自定义请求和响应对添加拦截回调和请求参数进行封装：响应结构中会带请求配置信息，所以修改了请求的config，同时需要修改响应结果的config</p></blockquote></li> <li><p>根据封装的Axios定义业务请求的Http：如TencentHttpClient.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> InterceptorHook<span class="token punctuation">,</span> ResponseConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/types/index.ts'</span>
<span class="token keyword">import</span> AxiosInstence <span class="token keyword">from</span> <span class="token string">'./AxiosInstence.ts'</span>
<span class="token comment">// 请求拦截器</span>
<span class="token keyword">const</span> transform<span class="token operator">:</span> InterceptorHook <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 请求</span>
    <span class="token function">requestInterceptor</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 请求头部处理，如添加 token</span>
        <span class="token keyword">return</span> config
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 异常拦截</span>
    <span class="token keyword">async</span> <span class="token function">requestInterceptorCatch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 请求错误，这里可以用全局提示框进行提示</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 响应拦截</span>
    <span class="token function">responseInterceptor</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> result <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// 因为 axios 返回不支持扩展自定义配置，需要自己断言一下</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> result <span class="token keyword">as</span> ResponseConfig
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> res <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 开启全局提示</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>config<span class="token punctuation">.</span>requestOptions<span class="token operator">?.</span>globalSuccessMessage <span class="token operator">??</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 这里全局提示请求成功</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这里全局提示请求成功'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 与后端约定的请求成功码 这里全局提示请求成功</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>config<span class="token punctuation">.</span>requestOptions<span class="token operator">?.</span>globalSuccessMessage <span class="token operator">??</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 请求返回值，建议将 返回值 进行解构</span>
        <span class="token keyword">return</span> res<span class="token punctuation">.</span>data
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">responseInterceptorCatch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里用来处理 http 常见错误，进行全局提示</span>
        <span class="token keyword">const</span> mapErrorStatus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token punctuation">[</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">'请求方式错误'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">401</span><span class="token punctuation">,</span> <span class="token string">'请重新登录'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">403</span><span class="token punctuation">,</span> <span class="token string">'拒绝访问'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token string">'请求地址有误'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">'服务器出错'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> message <span class="token operator">=</span> mapErrorStatus<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">'请求出错，请稍后再试'</span>
        <span class="token comment">// 此处全局报错</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// 具体使用时先实例一个请求对象</span>
<span class="token keyword">const</span> tencentHttpClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AxiosInstence</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baseURL<span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_BASE_URL</span><span class="token punctuation">,</span>
    timeout<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
    interceptorHooks<span class="token operator">:</span> transform<span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span> Authorization<span class="token operator">:</span> <span class="token string">'tokenaaaaa'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> tencentHttpClient
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div></li> <li><p>测试API请求</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">interface</span> <span class="token class-name">IPType</span> <span class="token punctuation">{</span>
    asn<span class="token operator">:</span> <span class="token builtin">string</span>
    city<span class="token operator">:</span> <span class="token builtin">string</span>
    continent_code<span class="token operator">:</span> <span class="token builtin">string</span>
    country<span class="token operator">:</span> <span class="token builtin">string</span>
    country_area<span class="token operator">:</span> <span class="token builtin">string</span>
    country_calling_code<span class="token operator">:</span> <span class="token builtin">string</span>
    country_capital<span class="token operator">:</span> <span class="token builtin">string</span>
    country_code<span class="token operator">:</span> <span class="token builtin">string</span>
    country_code_iso3<span class="token operator">:</span> <span class="token builtin">string</span>
    country_name<span class="token operator">:</span> <span class="token builtin">string</span>
    country_population<span class="token operator">:</span> <span class="token builtin">string</span>
    country_tld<span class="token operator">:</span> <span class="token builtin">string</span>
    currency<span class="token operator">:</span> <span class="token builtin">string</span>
    currency_name<span class="token operator">:</span> <span class="token builtin">string</span>
    in_eu<span class="token operator">:</span> <span class="token builtin">boolean</span>
    ip<span class="token operator">:</span> <span class="token builtin">string</span>
    languages<span class="token operator">:</span> <span class="token builtin">string</span>
    latitude<span class="token operator">:</span> <span class="token builtin">number</span>
    longitude<span class="token operator">:</span> <span class="token builtin">number</span>
    network<span class="token operator">:</span> <span class="token builtin">string</span>
    org<span class="token operator">:</span> <span class="token builtin">string</span>
    postal<span class="token operator">:</span> <span class="token builtin">string</span>
    region<span class="token operator">:</span> <span class="token builtin">string</span>
    region_code<span class="token operator">:</span> <span class="token builtin">string</span>
    timezone<span class="token operator">:</span> <span class="token builtin">string</span>
    utc_offset<span class="token operator">:</span> <span class="token builtin">string</span>
    version<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> RequestConfig<span class="token punctuation">,</span> IPType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/types/index.ts'</span>
<span class="token keyword">import</span> tencentHttpClient <span class="token keyword">from</span> <span class="token string">'@/uitl/TencentHttpClient.ts'</span>
<span class="token keyword">const</span> config<span class="token operator">:</span> RequestConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    requestOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        globalSuccessMessage<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">findByIp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>IPType<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> tencentHttpClient<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>IPType<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'https://ipapi.co/8.8.8.8/json/'</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> findByIp <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ol> <h2 id="_1-11-集成mockjs"><a href="#_1-11-集成mockjs" class="header-anchor">#</a> 1.11 集成MockJS</h2> <ol><li><p>安装Mock.js依赖及插件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">--D</span> mockjs @types/mockjs vite-plugin-mock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>配置Mock插件</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> viteMockServe <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite-plugin-mock'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 插件中添加mockServer</span>
        <span class="token function">viteMockServe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">// 解析根目录下的mock文件夹</span>
            mockPath<span class="token operator">:</span> <span class="token string">'mock'</span><span class="token punctuation">,</span>
            <span class="token comment">// 监视文件更改</span>
            watchFiles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    server<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在server中添加mock代理</span>
        proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">'/mock'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                target<span class="token operator">:</span> <span class="token string">'http://localhost:9002'</span><span class="token punctuation">,</span>
                changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/mock</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li> <li><p>添加测试所需都要的TS类型</p> <ul><li><p>设置全局响应数据的格式</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">interface</span> <span class="token class-name">ResponseData<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    code<span class="token operator">:</span> <span class="token builtin">string</span>
    msg<span class="token operator">:</span> <span class="token builtin">string</span>
    data<span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>新建测试需要使用到的类型UserRequest.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">interface</span> <span class="token class-name">UserRequest</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>新建测试需要使用到的类型User.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>统一导出</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">InterceptorHook</span> <span class="token keyword">from</span> <span class="token string">'./common/InterceptorHook.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">InterceptorRequestConfig</span> <span class="token keyword">from</span> <span class="token string">'./common/InterceptorRequestConfig.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">RequestConfig</span> <span class="token keyword">from</span> <span class="token string">'./common/RequestConfig.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">RequestOptions</span> <span class="token keyword">from</span> <span class="token string">'./common/RequestOptions.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">ResponseConfig</span> <span class="token keyword">from</span> <span class="token string">'./common/ResponseConfig.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">ResponseData</span> <span class="token keyword">from</span> <span class="token string">'./common/ResponseData.ts'</span>

<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">IPType</span> <span class="token keyword">from</span> <span class="token string">'./demo//IPType.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token keyword">from</span> <span class="token string">'./demo//User.ts'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token class-name">UserRequest</span> <span class="token keyword">from</span> <span class="token string">'./demo//UserRequest.ts'</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>
    InterceptorHook<span class="token punctuation">,</span>
    InterceptorRequestConfig<span class="token punctuation">,</span>
    RequestConfig<span class="token punctuation">,</span>
    RequestOptions<span class="token punctuation">,</span>
    ResponseConfig<span class="token punctuation">,</span>
    ResponseData<span class="token punctuation">,</span>
    IPType<span class="token punctuation">,</span>
    User<span class="token punctuation">,</span>
    UserRequest<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></li></ul></li> <li><p>根据Mock的配置，在根目录添加mock文件夹，并设置接口服务</p> <ul><li><p>TestMock.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MockMethod <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite-plugin-mock'</span>
<span class="token keyword">const</span> userApis<span class="token operator">:</span> MockMethod<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">'/mock/product'</span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">response</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                code<span class="token operator">:</span> <span class="token number">200200</span><span class="token punctuation">,</span>
                msg<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
                data<span class="token operator">:</span> <span class="token punctuation">{</span>
                    name<span class="token operator">:</span> <span class="token string">'商品'</span><span class="token punctuation">,</span>
                    age<span class="token operator">:</span> <span class="token number">2323</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> userApis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p>TestMock.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MockMethod <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite-plugin-mock'</span>
<span class="token keyword">const</span> userApis<span class="token operator">:</span> MockMethod<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">'/mock/product'</span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">response</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                code<span class="token operator">:</span> <span class="token number">200200</span><span class="token punctuation">,</span>
                msg<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
                data<span class="token operator">:</span> <span class="token punctuation">{</span>
                    name<span class="token operator">:</span> <span class="token string">'商品'</span><span class="token punctuation">,</span>
                    age<span class="token operator">:</span> <span class="token number">2323</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> userApis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul></li> <li><p>在API中新增方法调用mock接口数据</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> RequestConfig<span class="token punctuation">,</span> IPType<span class="token punctuation">,</span> ResponseData<span class="token punctuation">,</span> UserRequest<span class="token punctuation">,</span> User <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/types/index.ts'</span>
<span class="token keyword">import</span> tencentHttpClient <span class="token keyword">from</span> <span class="token string">'@/uitl/TencentHttpClient.ts'</span>
<span class="token keyword">const</span> config<span class="token operator">:</span> RequestConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    requestOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        globalSuccessMessage<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">findByIp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>IPType<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> tencentHttpClient<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>IPType<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'https://ipapi.co/8.8.8.8/json/'</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getUser</span><span class="token punctuation">(</span>name<span class="token operator">:</span> UserRequest<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ResponseData<span class="token operator">&lt;</span>User<span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> tencentHttpClient<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getProduct</span><span class="token punctuation">(</span>name<span class="token operator">:</span> UserRequest<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ResponseData<span class="token operator">&lt;</span>User<span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> tencentHttpClient<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/product'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> findByIp<span class="token punctuation">,</span> getUser<span class="token punctuation">,</span> getProduct <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li> <li><p>测试Mock功能</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> findByIp<span class="token punctuation">,</span> getProduct<span class="token punctuation">,</span> getUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/apis/DemoApi.ts'</span>
<span class="token function">findByIp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'findByIp'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'ali'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getUser'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">getProduct</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'ali'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getProduct'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ol> <h2 id="_1-12-集成pinia"><a href="#_1-12-集成pinia" class="header-anchor">#</a> 1.12 集成Pinia</h2> <ol><li><p>下载pinia依赖</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">add</span> pinia@next
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>在main.ts中配置pinia</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'svg-icon'</span><span class="token punctuation">,</span> SvgIcon<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>新建store目录，定义测试文件DemoStore.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">interface</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    piniaCount<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> UserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'UserStore'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    state<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Demo <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            piniaCount<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    getters<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">getCount</span><span class="token punctuation">(</span>state<span class="token operator">:</span> Demo<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> state<span class="token punctuation">.</span>piniaCount <span class="token operator">+</span> <span class="token number">20</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">countAdd</span><span class="token punctuation">(</span>state<span class="token operator">:</span> Demo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                state<span class="token punctuation">.</span>piniaCount<span class="token operator">++</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li> <li><p>测试访问Store中的数据</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> UserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/store/DemoStore'</span>
    <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">UserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">piniaCountAdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        userStore<span class="token punctuation">.</span>piniaCount<span class="token operator">++</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>piniaCountAdd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>piniaCountAdd<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ userStore.piniaCount }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ol> <h2 id="_1-13-集成router"><a href="#_1-13-集成router" class="header-anchor">#</a> 1.13 集成Router</h2> <ol><li><p>安装Router4</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">install</span> vue-router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>添加Router配置文件</p> <ul><li><p>@/components/error/ErrorPage.vue</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>ErrorPage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>新建router目录，添加index.ts文件</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">const</span> defaultRoute<span class="token operator">:</span> RouteRecordRaw <span class="token operator">=</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/:catchAll(.*)'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/error/404.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> routes<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>defaultRoute<span class="token punctuation">]</span>
<span class="token keyword">const</span> routerModules<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">'./modules/*.ts'</span><span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>routerModules<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    routes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>routerModules<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>default<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>再到router目录中新增modules目录，所有路由定义在该目录中，如添加测试配置：hello.ts</p></li></ul> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">const</span> hello<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'Root'</span><span class="token punctuation">,</span>
        redirect<span class="token operator">:</span> <span class="token string">'/hello'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/hello'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'Hello'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/HelloWorld.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span> <span class="token punctuation">{</span>
            msg<span class="token operator">:</span> <span class="token string">'路由参数'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>在main.ts中加入router</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router'</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>动态路由配置</p> <ul><li><p>创建用于测试的动态路由组件：@/components/TestRouter.vue</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>定义公共组件，组装动态组件，如下案例：将动态组件封装到一个map中</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">{</span>
    Test<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/TestRouter.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>模拟从接口获取到组件信息</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// 从接口获取到数据的结构</span>
<span class="token keyword">interface</span> <span class="token class-name">Menu</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token builtin">string</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
    component<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 从接口中获取到的数据</span>
<span class="token keyword">const</span> ms<span class="token operator">:</span> Menu<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/test'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'Test'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> <span class="token string">'Test'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// 将接口数据转换为路由数据</span>
<span class="token keyword">function</span> <span class="token function">buildRouter</span><span class="token punctuation">(</span>menus<span class="token operator">:</span> Menu<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> rs<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> menu <span class="token keyword">of</span> menus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token punctuation">{</span>
            path<span class="token operator">:</span> menu<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
            name<span class="token operator">:</span> menu<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
            component<span class="token operator">:</span> map<span class="token punctuation">[</span>menu<span class="token punctuation">.</span>component<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        rs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> rs
<span class="token punctuation">}</span>

<span class="token comment">// 从路由导航中获取接口数据，转换为路由并动态添加到路由中</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">hasRoute</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> dynamicRouters <span class="token operator">=</span> <span class="token function">buildRouter</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
        dynamicRouters<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>to<span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div></li></ul></li> <li><p>路由导航从pinia中获取路由信息；pinia异步从mockJs中查询菜单结构并保存到SessionStorage中，并且冲SessionStorage中获取数据封装为路径组件</p></li></ol> <h2 id="_1-14-集成elementplus"><a href="#_1-14-集成elementplus" class="header-anchor">#</a> 1.14 集成ElementPlus</h2> <ol><li><p>下载ElementPlus</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">install</span> element-plus
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>按需加载插件下载：需要安装unplugin-vue-components 和 unplugin-auto-import这两款插件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> unplugin-vue-components unplugin-auto-import
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>修改Vite配置文件：vite.config.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span>
<span class="token keyword">import</span> Components <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/vite'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElementPlusResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/resolvers'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      resolvers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      resolvers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>引入ElementPlus样式文件：main.ts</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token string">'element-plus/dist/index.css'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/06/04, 20:18:30</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/note_blogs_vuepress_web/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/note_blogs_vuepress_web/pages/323f08/"><div>
            第一章 自定义组件
            <!----></div></a> <span class="date">01-03</span></dt></dl><dl><dd>02</dd> <dt><a href="/note_blogs_vuepress_web/pages/f67036/"><div>
            第一章 Provider
            <!----></div></a> <span class="date">01-03</span></dt></dl><dl><dd>03</dd> <dt><a href="/note_blogs_vuepress_web/pages/932ba4/"><div>
            第四章 表单组件
            <!----></div></a> <span class="date">01-03</span></dt></dl> <dl><dd></dd> <dt><a href="/note_blogs_vuepress_web/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://space.bilibili.com/205014127" title="哔哩哔哩" target="_blank" class="iconfont icon-bilibili"></a><a href="https://gitee.com/xiaoliuxuesheng" title="GitEE" target="_blank" class="iconfont icon-gitee"></a><a href="https://github.com/xiaoliuxuesheng" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=2916766519" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/note_blogs_vuepress_web/assets/js/app.00b3e9fa.js" defer></script><script src="/note_blogs_vuepress_web/assets/js/2.ceef22bc.js" defer></script><script src="/note_blogs_vuepress_web/assets/js/80.e1af4f09.js" defer></script>
  </body>
</html>
